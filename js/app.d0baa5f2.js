(function(t){function n(n){for(var o,a,s=n[0],c=n[1],u=n[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(n);while(f.length)f.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],o=!0,s=1;s<e.length;s++){var c=e[s];0!==r[c]&&(o=!1)}o&&(i.splice(n--,1),t=a(a.s=e[0]))}return t}var o={},r={app:0},i=[];function a(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=o,a.d=function(t,n,e){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)a.d(e,o,function(n){return t[n]}.bind(null,o));return e},a.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="/pixelpainter/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var u=0;u<s.length;u++)n(s[u]);var l=c;i.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"034f":function(t,n,e){"use strict";e("85ec")},"56d7":function(t,n,e){"use strict";e.r(n);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("2b0e"),r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-app",{staticStyle:{"background-color":"#1a1a1a",overflow:"visible"}},[e("vue-pan-zoom",{attrs:{options:{beforeMouseDown:t.beforeMouseDownHandler}}},[e("div",{staticClass:"content",staticStyle:{width:"3200px",height:"1800px",outline:"black solid"}},[e("canvas",{attrs:{width:"3200",height:"1800",id:"canvas"},on:{mousemove:t.getMousePosition,mousedown:t.mouseDown,mouseup:function(n){t.isMouseDown=!1}}})])]),e("div",{staticClass:"toolbar mb-8"},[e("v-card",{staticClass:"ma-4"},[e("v-card-title",[t._v(" pixelpainter "),e("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}),e("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on;return[e("v-btn",t._g({attrs:{color:t.color}},o))]}}])},[e("v-color-picker",{attrs:{"show-swatches":""},model:{value:t.color,callback:function(n){t.color=n},expression:"color"}})],1),e("v-btn",{staticClass:"ml-2",attrs:{icon:"",color:t.eraser?"blue":"gray"},on:{click:function(n){t.eraser=!t.eraser}}},[e("v-icon",[t._v(" mdi-eraser-variant ")])],1),e("v-spacer"),t._v(" "+t._s(t.mousePosition.x)+", "+t._s(t.mousePosition.y)+" "),e("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}),t._v(" "+t._s(t.mouseColor)+" "),e("v-spacer"),e("input",{ref:"canvasFile",attrs:{type:"file",hidden:""},on:{change:t.loadFile}}),e("v-btn",{attrs:{icon:""},on:{contextmenu:function(n){return t.$refs["canvasFile"].click()},click:function(n){t.showBackground=!t.showBackground}}},[e("v-icon",{attrs:{color:t.showBackground?"blue":"gray"}},[t._v(" mdi-image ")])],1),e("input",{ref:"importpxl",attrs:{type:"file",hidden:""},on:{change:t.loadDrawing}}),e("v-btn",{attrs:{icon:""},on:{contextmenu:t.importDrawing,click:function(n){t.showDrawing=!t.showDrawing}}},[e("v-icon",{attrs:{color:t.showDrawing?"blue":"gray"}},[t._v(" mdi-pencil ")])],1),e("v-btn",{attrs:{color:"blue"},on:{click:t.downloadDrawing}},[t._v("Export .pxl")])],1)],1)],1)],1)},i=[],a=e("2909"),s=(e("fb6a"),e("d3b7"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("ac1f"),e("466d"),e("a15b"),e("d81d"),e("4d90"),e("25f0"),e("21a6")),c={name:"App",components:{},data:function(){return{color:"#FFFFFF",mousePosition:{x:0,y:0},drawing:[],dialog:!1,showBackground:!0,showDrawing:!0,backgroundBytes:[],isMouseDown:!1,mouseColor:"#000000",eraser:!1}},mounted:function(){var t=document.getElementById("canvas"),n=t.getContext("2d");this.canvas=t,this.ctx=n,this.generateEmptyDrawing(),this.render()},methods:{beforeMouseDownHandler:function(t){return!t.shiftKey},mouseDown:function(t){this.isMouseDown=!0,t.shiftKey||this.paint()},getMousePosition:function(t){var n=this.canvas.getBoundingClientRect(),e=this.canvas.width/n.width,o=this.canvas.height/n.height;this.mousePosition.x=Math.floor((t.clientX-n.left)*e/20),this.mousePosition.y=Math.floor((t.clientY-n.top)*o/20);var r=this.ctx.getImageData(20*this.mousePosition.x,20*this.mousePosition.y,1,1).data;this.mouseColor="#"+("000000"+this.rgbToHex(r[0],r[1],r[2])).slice(-6),this.isMouseDown&&!t.shiftKey&&this.paint()},importDrawing:function(){this.$refs["importpxl"].click()},loadFile:function(t){var n=new FileReader,e=this;n.onload=function(t){var n=new Uint8Array(t.target.result);e.backgroundBytes=Object(a["a"])(new Uint8Array(n)).map((function(t){return t.toString(16).padStart(2,"0")})).join("").match(/.{1,6}/g)},n.readAsArrayBuffer(t.target.files[0])},loadDrawing:function(t){var n=new FileReader,e=this;n.onload=function(t){var n=new Uint8Array(t.target.result);e.drawing=Object(a["a"])(new Uint8Array(n)).map((function(t){return t.toString(16).padStart(2,"0")})).join("").match(/.{1,6}/g)},n.readAsArrayBuffer(t.target.files[0])},drawPixel:function(t,n,e){this.ctx.fillStyle="#".concat(e),this.ctx.fillRect(20*t,20*n,20,20)},generateEmptyDrawing:function(){for(var t=0;t<14400;t++)this.drawing.push("000000")},render:function(){if(this.ctx.clearRect(0,0,3200,1800),this.showBackground&&this.backgroundBytes.length>0)for(var t=0,n=0;n<90;n++)for(var e=0;e<160;e++)this.drawPixel(e,n,this.backgroundBytes[t]),t++;if(this.showDrawing)for(var o=0,r=0;r<90;r++)for(var i=0;i<160;i++)"000000"!==this.drawing[o]&&this.drawPixel(i,r,this.drawing[o]),o++},paint:function(){console.log("drawing"),this.eraser?this.drawing[this.getPixelPositionArray([this.mousePosition.x,this.mousePosition.y])]="000000":this.drawing[this.getPixelPositionArray([this.mousePosition.x,this.mousePosition.y])]=this.color.substring(1),this.render()},rgbToHex:function(t,n,e){if(t>255||n>255||e>255)throw"Invalid color component";return(t<<16|n<<8|e).toString(16)},downloadDrawing:function(){var t=this.drawing.join("");Object(s["saveAs"])(new Blob([new Uint8Array(t.match(/.{1,2}/g).map((function(t){return parseInt(t,16)})))],{type:"mimeType"}),"drawing.pxl")},getPixelPositionArray:function(t){return 160*t[1]+t[0]}},watch:{backgroundBytes:function(){this.render()},drawing:function(){this.render()},showBackground:function(){this.render()},showDrawing:function(){this.render()}}},u=c,l=(e("034f"),e("2877")),d=e("6544"),f=e.n(d),h=e("7496"),p=e("8336"),g=e("b0af"),v=e("99d9"),w=e("03a4"),m=e("ce7e"),b=e("132d"),y=e("e449"),x=e("2fa4"),P=Object(l["a"])(u,r,i,!1,null,null,null),k=P.exports;f()(P,{VApp:h["a"],VBtn:p["a"],VCard:g["a"],VCardTitle:v["a"],VColorPicker:w["a"],VDivider:m["a"],VIcon:b["a"],VMenu:y["a"],VSpacer:x["a"]});var D=e("f309");o["a"].use(D["a"]);var _=new D["a"]({}),B=e("7d05"),j=e.n(B),M=e("e9aa");o["a"].prototype.$panZoom=j.a,o["a"].component("VuePanZoom",M["a"]),o["a"].config.productionTip=!1,new o["a"]({vuetify:_,render:function(t){return t(k)}}).$mount("#app")},"85ec":function(t,n,e){}});
//# sourceMappingURL=app.d0baa5f2.js.map